

echo "<tr><td>";

echo "<img src='calls-month-wall.png' alt='Generated RRD image'>";

echo "</td></tr>";

echo "</table>";


echo "<BR>";


echo "<table>";

echo "<tr><td>";

#echo "<img src='calls-year-wall.png' alt='Generated RRD image'>";

echo "</td></tr>";

echo "</table>";


echo "</div>";

echo "</body></html>";


exit;


function create_graph($output, $start, $title, $height, $width) {


  $options = array(

    "--slope-mode",

    "--start", $start,

    "--title=$title",

    "--vertical-label=Active Calls",

    "--lower=0",

    "--height=$height",

    "--width=$width",

    "-cBACK#161616",

    "-cCANVAS#1e1e1e",

    "-cSHADEA#000000",

    "-cSHADEB#000000",

    "-cFONT#b7b7b7",

    "-cFRAME#ffffff",

    "-cARROW#000000",

    "DEF:callmax=/usr/local/scripts/git/jcall2/data/jcall.rrd:callstot:MAX",

    "CDEF:transcalldatamax=callmax,1,*",

    "AREA:transcalldatamax#b6d14b40",

    "LINE2:transcalldatamax#a0b842:Active SIP Calls",

    "COMMENT:\\n",

#    "GPRINT:transcalldatamax:LAST:Calls Now %6.2lf",

    "GPRINT:transcalldatamax:MAX:Calls Max %6.2lf"

  );


 $ret = rrd_graph($output, $options, count($options));


  if (! $ret) {

    echo "<b>Graph error: </b>".rrd_error()."\n";

  }

}


?>
